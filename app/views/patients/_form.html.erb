<div class="container border py-3">
  <%= form_with model: @patient, local: true do |f| %>

    <div class="row">
      <div class="form-group col-lg-4">
        <%= f.label :first_name, class: "form-label" %>
        <%= f.text_field :first_name, placeholder: "First Name", class: "form-control #{'is-invalid' if @patient.errors[:first_name].any?}", autocomplete: "off" %>
          <% @patient.errors.full_messages_for(:first_name).each do |msg| %>
            <div class="invalid-feedback">
              <%= msg %>
            </div>
          <% end %>
      </div>

      <div class="form-group col-lg-4">
        <%= f.label :middle_name, class: "form-label" %>
        <%= f.text_field :middle_name, placeholder: "Middle Name", class: "form-control #{'is-invalid' if @patient.errors[:middle_name].any?}", autocomplete: "off" %>
        <% @patient.errors.full_messages_for(:middle_name).each do |msg| %>
          <div class="invalid-feedback">
            <%= msg %>
          </div>
        <% end %>
      </div>

      <div class="form-group col-lg-4">
        <%= f.label :last_name, class: "form-label" %>
        <%= f.text_field :last_name, placeholder: "Last Name", class: "form-control #{'is-invalid' if @patient.errors[:last_name].any?}", autocomplete: "off" %>
          <% @patient.errors.full_messages_for(:last_name).each do |msg| %>
            <div class="invalid-feedback">
              <%= msg %>
            </div>
          <% end %>
      </div>
    </div>

    <div class="row">
      <div class="form-group col-lg-6">
        <%= f.label :date_of_birth, "Date of Birth", class: "form-label" %>
        <%= f.date_field :date_of_birth, class: "form-control #{'is-invalid' if @patient.errors[:date_of_birth].any?}", autocomplete: "off" %>
          <% @patient.errors.full_messages_for(:date_of_birth).each do |msg| %>
            <div class="invalid-feedback">
              <%= msg %>
            </div>
          <% end %>
      </div>

      <div class="form-group col-lg-6">
        <%= f.label :gender, "Gender", class: "form-label" %>
        <%= f.select :gender, ["Male", "Female", "Other"], { include_blank: "Select Gender" }, class: "form-select #{'is-invalid' if @patient.errors[:gender].any?}" %>
          <% @patient.errors.full_messages_for(:gender).each do |msg| %>
            <div class="invalid-feedback">
              <%= msg %>
            </div>
          <% end %>
      </div>
    </div>

    <div class="row">
      <div class="form-group col-lg-6">
        <%= f.label :email_address, class: "form-label" %>
        <%= f.text_field :email_address, class: "form-control #{'is-invalid' if @patient.errors[:email_address].any?}", autocomplete: "off" %>
          <% @patient.errors.full_messages_for(:email_address).each do |msg| %>
            <div class="invalid-feedback">
              <%= msg %>
            </div>
          <% end %>
      </div>

      <div class="form-group col-lg-6">
        <%= f.label :phone_number, class: "form-label" %>
        <%= f.text_field :phone_number, class: "form-control #{'is-invalid' if @patient.errors[:phone_number].any?}", autocomplete: "off" %>
          <% @patient.errors.full_messages_for(:phone_number).each do |msg| %>
            <div class="invalid-feedback">
              <%= msg %>
            </div>
          <% end %>
      </div>
    </div>

    <div class="row">
      <div class="form-group col-lg-6">
        <%= f.label :emergency_contact, class: "form-label" %>
        <%= f.text_field :emergency_contact, class: "form-control #{'is-invalid' if @patient.errors[:emergency_contact].any?}", autocomplete: "off" %>
          <% @patient.errors.full_messages_for(:emergency_contact).each do |msg| %>
            <div class="invalid-feedback">
              <%= msg %>
            </div>
          <% end %>
      </div>

      <div class="form-group col-lg-6">
        <%= f.label :insurance_information, class: "form-label" %>
        <%= f.text_field :insurance_information, class: "form-control #{'is-invalid' if @patient.errors[:insurance_information].any?}", autocomplete: "off" %>
          <% @patient.errors.full_messages_for(:insurance_information).each do |msg| %>
            <div class="invalid-feedback">
              <%= msg %>
            </div>
          <% end %>
      </div>
    </div>

    <div class="row">
      <div class="form-group col-lg-6">
        <%= f.label :address_1, class: "form-label" %>
        <%= f.text_field :address_1, class: "form-control #{'is-invalid' if @patient.errors[:address_1].any?}", autocomplete: "off" %>
          <% @patient.errors.full_messages_for(:address_1).each do |msg| %>
            <div class="invalid-feedback">
              <%= msg %>
            </div>
          <% end %>
      </div>

      <div class="form-group col-lg-6">
        <%= f.label :address_2, class: "form-label" %>
        <%= f.text_field :address_2, class: "form-control #{'is-invalid' if @patient.errors[:address_2].any?}", autocomplete: "off" %>
          <% @patient.errors.full_messages_for(:address_2).each do |msg| %>
            <div class="invalid-feedback">
              <%= msg %>
            </div>
          <% end %>
      </div>
    </div>

    <div class="row">
      <div class="form-group col-lg-6">
        <%= f.label :city, class: "form-label" %>
        <%= f.text_field :city, class: "form-control #{'is-invalid' if @patient.errors[:city].any?}", autocomplete: "off" %>
          <% @patient.errors.full_messages_for(:city).each do |msg| %>
            <div class="invalid-feedback">
              <%= msg %>
            </div>
          <% end %>
      </div>

      <div class="form-group col-lg-6">
        <%= f.label :country, class: "form-label" %>
        <%= f.text_field :country, class: "form-control #{'is-invalid' if @patient.errors[:country].any?}", autocomplete: "off" %>
          <% @patient.errors.full_messages_for(:country).each do |msg| %>
            <div class="invalid-feedback">
              <%= msg %>
            </div>
          <% end %>
      </div>
    </div>

    <div class="row">
      <div class="form-group col-lg-6">
        <%= f.label :state, class: "form-label" %>
        <%= f.text_field :state, class: "form-control #{'is-invalid' if @patient.errors[:state].any?}", autocomplete: "off" %>
          <% @patient.errors.full_messages_for(:state).each do |msg| %>
            <div class="invalid-feedback">
              <%= msg %>
            </div>
          <% end %>
      </div>

      <div class="form-group col-lg-6">
        <%= f.label :zip_code, class: "form-label" %>
        <%= f.text_field :zip_code, class: "form-control #{'is-invalid' if @patient.errors[:zip_code].any?}", autocomplete: "off" %>
          <% @patient.errors.full_messages_for(:zip_code).each do |msg| %>
            <div class="invalid-feedback">
              <%= msg %>
            </div>
          <% end %>
      </div>
    </div>
    
    <div class="form-group">
      <%= f.label :status, class: "form-label" %>
      <%= f.select :status,["Active", "In-active"], { include_blank: "Select Status" }, class: "form-control #{'is-invalid' if @patient.errors[:status].any?}", autocomplete: "off" %>
        <% @patient.errors.full_messages_for(:status).each do |msg| %>
          <div class="invalid-feedback">
            <%= msg %>
          </div>
        <% end %>
    </div>

    <div class="row">
      <!-- <div class="form-group col-lg-6">
        <%#= f.label :active, "Is Active?", class: "form-label" %>
        <%#= f.select :active, [["Yes", true], ["No", false]], { include_blank: "Select Status" }, class: "form-select #{'is-invalid' if @patient.errors[:active].any?}" %>
          <%# @patient.errors.full_messages_for(:active).each do |msg| %>
            <div class="invalid-feedback">
              <%#= msg %>
            </div>
          <%#end %>
      </div> -->
    </div>

    <div class="form-group">
      <%= f.label :current_medications, class: "form-label" %>
      <%= f.text_area :current_medications, class: "form-control #{'is-invalid' if @patient.errors[:current_medications].any?}", autocomplete: "off" %>
          <% @patient.errors.full_messages_for(:current_medications).each do |msg| %>
            <div class="invalid-feedback">
              <%= msg %>
            </div>
          <% end %>
    </div>

    <div class="form-group">
      <%= f.label :medical_history, class: "form-label" %>
      <%= f.text_area :medical_history, class: "form-control #{'is-invalid' if @patient.errors[:medical_history].any?}", autocomplete: "off" %>
          <% @patient.errors.full_messages_for(:medical_history).each do |msg| %>
            <div class="invalid-feedback">
              <%= msg %>
            </div>
          <% end %>
    </div>

    <div class="form-group">
      <%= f.label :allergies, class: "form-label" %>
      <%= f.text_area :allergies, class: "form-control #{'is-invalid' if @patient.errors[:allergies].any?}", autocomplete: "off" %>
          <% @patient.errors.full_messages_for(:allergies).each do |msg| %>
            <div class="invalid-feedback">
              <%= msg %>
            </div>
          <% end %>
    </div>

    <div class="form-group">
      <%= f.label :doctor_id, "Doctor", class: "form-label" %>
      <%= f.collection_select :doctor_id, @doctors, :id, :full_name, {prompt: "Select a doctor"}, class: "form-select #{'is-invalid' if @patient.errors[:doctor_id].any?}" %>
          <% @patient.errors.full_messages_for(:doctor_id).each do |msg| %>
            <div class="invalid-feedback">
              <%= msg %>
            </div>
          <% end %>
      </div>
      
      <div class="form-group">
        <%= f.label :documents, "Patient Documents", class: "form-label" %>
        <%= f.file_field :documents, multiple: true, class: 'form-control' %>
      </div>

      <%= f.submit  class: "btn btn-primary mt-2 p-2 mb-2 text-decoration-none" %>
      <%= link_to "← Back to Patients", patients_path, class: "btn btn-outline-primary p-2 text-decoration-none" %>
    <% end %>
</div>
