<!DOCTYPE html>
<html>
  <head>
    <title>EmrHmsdev</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Font Awesome for eye icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body>
      <!-- Bootstrap -->
      <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
      <!-- Font Awesome -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>
      
    <% unless devise_controller? %>
      <div class="topbar">
          <%= render "shared/topbar" %>
      </div>
    <% end %>


    <main class="container mx-auto mt-28 px-5 flex">
      <% unless devise_controller? %>
          <nav class="sidebar">
            <%= render "shared/sidebar" %>
          </nav>
    <% end %>
      <%= yield %>
    </main>
    <% flash.each do |type, message| %>
      <% alert_class = case type.to_sym
        when :notice then "alert-success"
        when :alert then "alert-danger"
        when :error then "alert-danger"
        else "alert-info"
      end %>

      <div class="alert <%= alert_class %> alert-dismissible fade show position-fixed top-0 start-50 translate-middle-x mt-3" role="alert" style="z-index: 9999; min-width: 300px;">
        <%= message %>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    <% end %>
  </body>
</html>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    setTimeout(() => {
      const alerts = document.querySelectorAll('.alert');
      alerts.forEach(alert => {
        new bootstrap.Alert(alert).close();
      });
    }, 3000); // 3 seconds
  });
</script>
