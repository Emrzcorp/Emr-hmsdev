<div class="container border py-3">
	<%= form_with(model: appointment, local: true) do |f| %>

    <% unless params[:patient_id] %>
	    <div class="form-group">
	      <%= f.label :patient_id, "Patient", class: "form-label" %>
	      <%= f.collection_select :patient_id, Patient.all, :id, :full_name, {prompt: "Select a Patient"}, class: "form-select #{'is-invalid' if @appointment.errors[:patient_id].any?}" %>
	        <% @appointment.errors.full_messages_for(:patient_id).each do |msg| %>
	          <div class="invalid-feedback">
	            <%= msg %>
	          </div>
	        <% end %>
	    </div>
	  <% end %>
		
		<div class="form-group">
      <%= f.label :doctor_id, "Doctor", class: "form-label" %>
      <%= f.collection_select :doctor_id, Doctor.all, :id, :full_name, {prompt: "Select a doctor"}, class: "form-select #{'is-invalid' if @appointment.errors[:doctor_id].any?}" %>
      <% @appointment.errors.full_messages_for(:doctor_id).each do |msg| %>
        <div class="invalid-feedback">
          <%= msg %>
        </div>
      <% end %>
    </div>

    <div class="form-group">
      <%= f.label :scheduled_date, "Scheduled Date", class: "form-label" %>
      <%= f.date_field :scheduled_date, class: "form-control #{'is-invalid' if @appointment.errors[:scheduled_date].any?}", autocomplete: "off" %>
      <% @appointment.errors.full_messages_for(:scheduled_date).each do |msg| %>
        <div class="invalid-feedback">
          <%= msg %>
        </div>
      <% end %>
    </div>

    <div>
    	<%= f.submit  class: "btn btn-primary mt-2 p-2 mb-2 text-decoration-none" %>
			<%= link_to "← Back to Appointments", appointments_path, class: "btn btn-outline-primary p-2 text-decoration-none" %>
    </div>
	<% end %>
</div>